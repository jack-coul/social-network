import React, { useState } from "react";
import { useDispatch } from "react-redux";
import { Link } from "react-router-dom";
import { registerUser } from "../../../redux/features/application";

const SignUp = () => {
  const [firstname, setFirstname] = useState("");
  const [lastname, setLastname] = useState("");
  const [login, setLogin] = useState("");
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [passwordTwo, setPasswordTwo] = useState("");
  const [message, setMessage] = useState("");
  const [validEmail, setValidEmail]= useState('')
  const [validPassword, setValidPassword] = useState('')
  const dispatch = useDispatch();

  const handleValidPassword = (e)=>{
    setPassword(e.target.value)
    const re1 = /(?=.*[!@#$%^&*])/; //- строка содержит хотя бы один спецсимвол;
    const re2 = /[0-9a-zA-Z!@#$%^&*]{6,}/; // - не меньше шести символов
    if (!re2.test(e.target.value)) {
      setValidPassword("Пароль должен не меньше шести символов");
    } else if (!re1.test(String(e.target.value))) {
      setValidPassword("Пароль должен содержать хотя бы один спецсимвол");
    } else {
      setValidPassword("");
    }
  }

  const handleValidEmail = (e)=>{
    setEmail(e.target.value);
    const emailValid =
      /^((([0-9A-Za-z]{1}[-0-9A-z\.]{1,}[0-9A-Za-z]{1})|([0-9А-Яа-я]{1}[-0-9А-я\.]{1,}[0-9А-Яа-я]{1}))@([-A-Za-z]{1,}\.){1,2}[-A-Za-z]{2,})$/u;
    if (!emailValid.test(String(e.target.value))) {
      setValidEmail("Недопустимый майл");
    } else {
      setValidEmail("");
    }
  }
  const handleSignUp = () => {

    
    if (password === passwordTwo) {
      dispatch(registerUser(firstname, lastname, login, email, password));
      setMessage("Регистрация прошла успешно");
    } else {
      setMessage("Пароли не совпадают");
    }
  };
  return (
    <div>
      <div className="backgroundLogo">
      <svg
            class="injected-svg"
            id="svg-5b7b338b-346e-4073-911d-638d9bb72eab"
            viewBox="0 0 540 508"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g xmlns="http://www.w3.org/2000/svg" fill="#d68048" id="shape-svg">
              <title>graphic</title>
              <g id="Слой_2" data-name="Слой 2">
                <g id="Слой_1-2" data-name="Слой 1">
                  <path
                    transform="translate(83, 157) scale(0.8,0.8)"
                    d="M97.73,44.12C77.22,36,69.47,17.85,57.46,1a2,2,0,0,0-3.69.49c-6.52,24.4,13,53,40,45.57a1.78,1.78,0,0,0,1.33-1.37c.68.15,1.34.34,2,.46A1,1,0,0,0,97.73,44.12Zm-41-37c9,13.6,17.34,30.16,32.45,36.66C68.68,45.88,54.26,26.82,56.77,7.1Z"
                  ></path>
                  <path
                    transform="translate(83, 157) scale(0.8,0.8)"
                    d="M54.62,56.53l-.41-.1A2.1,2.1,0,0,0,52.3,56C38.6,52.62,28,44.7,19.94,32.93a2.1,2.1,0,0,0-3.8.5c-4,10.42-2.22,20.93,7.3,27.43,8.68,5.94,23,5.08,30.81-1.91a1.33,1.33,0,0,0,.14-.19A1.14,1.14,0,0,0,54.62,56.53ZM26.78,57.86c-7.7-3.9-9.39-11.77-7.8-19.3,7.34,9.3,17,16.86,28.54,19.35C40.68,60.52,34.09,61.57,26.78,57.86Z"
                  ></path>
                  <path
                    transform="translate(83, 157) scale(0.8,0.8)"
                    d="M364.66,46.1c.71-.12,1.36-.31,2-.46A1.78,1.78,0,0,0,368,47c27,7.47,46.55-21.17,40-45.57A2,2,0,0,0,404.39,1c-12,16.9-19.77,35-40.27,43.17A1,1,0,0,0,364.66,46.1Zm8-2.34c15.11-6.5,23.47-23.06,32.44-36.66C407.59,26.82,393.16,45.88,372.63,43.76Z"
                  ></path>
                  <path
                    transform="translate(83, 157) scale(0.8,0.8)"
                    d="M407.46,58.76a.85.85,0,0,0,.14.19c7.8,7,22.13,7.85,30.81,1.91,9.51-6.5,11.29-17,7.3-27.43a2.1,2.1,0,0,0-3.8-.5c-8,11.77-18.67,19.69-32.37,23a2.09,2.09,0,0,0-1.9.48l-.42.1A1.14,1.14,0,0,0,407.46,58.76Zm6.87-.85c11.53-2.49,21.2-10,28.53-19.35,1.6,7.53-.09,15.4-7.79,19.3C427.75,61.57,421.16,60.52,414.33,57.91Z"
                  ></path>
                  <path
                    transform="translate(83, 157) scale(0.8,0.8)"
                    d="M1.5,131.9H26.18"
                  ></path>
                  <path
                    transform="translate(83, 157) scale(0.8,0.8)"
                    d="M26.18,133.4H1.5a1.5,1.5,0,0,1,0-3H26.18a1.5,1.5,0,1,1,0,3Z"
                  ></path>
                  <path
                    transform="translate(83, 157) scale(0.8,0.8)"
                    d="M435.5,131.9h24.68"
                  ></path>
                  <path
                    transform="translate(83, 157) scale(0.8,0.8)"
                    d="M460.18,133.4H435.5a1.5,1.5,0,0,1,0-3h24.68a1.5,1.5,0,0,1,0,3Z"
                  ></path>
                </g>
              </g>
            </g>
            <path
              xmlns="http://www.w3.org/2000/svg"
              id="SvgjsPath2079558"
              d="M15.10 1.30Q13.20 1.30 13.20-0.90L13.20-0.90L13.20-2.10Q13.30-2.50 13.30-3.10L13.30-3.10L13.30-3.60L11.50-15.70Q10.80-19.50 10.60-21.20L10.60-21.20Q9.70-28.20 8.70-36.80L8.70-36.80Q7.90-43.60 5.90-59.20L5.90-59.20L5.60-61.50Q4.10-72.80 3.40-73.90L3.40-73.90Q3.70-74.40 4.30-74.80Q4.90-75.20 5.50-75.20L5.50-75.20Q7-75.20 7.55-74.70Q8.10-74.20 8.10-72.90L8.10-72.90L8.10-72L8.10-71L8.10-69.90Q11.20-37.20 14.60-8.70L14.60-8.70L14.80-8.70Q15.10-11.60 16-24.60L16-24.60L16.20-27.50Q16.90-40.20 17-40.90L17-40.90Q17.30-43.90 18.20-49.70L18.20-49.70L19.40-57.80L19.70-62.40Q19.80-63.60 19.85-64.45Q19.90-65.30 20-65.70L20-65.70L20.10-67Q20.10-67.10 20.25-67.30Q20.40-67.50 20.70-67.70L20.70-67.70Q22.10-67.70 22.50-67L22.50-67Q22.80-66.70 22.90-66.35Q23-66 23-65.50L23-65.50Q23.20-64.60 23.20-64.60L23.20-64.60Q24.20-59.30 27.50-37Q30.80-14.70 31.50-7.60L31.50-7.60L31.80-7.40L35.50-47.90Q35.70-51.70 36.80-59.90L36.80-59.90Q37.80-68.20 37.80-73.40L37.80-73.40L37.70-74.40L37.70-75.30Q37.70-76.60 38.30-77.15Q38.90-77.70 40.30-77.70L40.30-77.70Q40.90-77.70 41.55-77.20Q42.20-76.70 42.20-76.10L42.20-76.10Q42.20-75.10 41.10-74.20L41.10-74.20Q41.20-74.10 41.20-73.60L41.20-73.60Q41.20-73 41.05-72.35Q40.90-71.70 40.80-71.40L40.80-71.40Q39.70-62.40 38.10-44.90L38.10-44.90L36.10-24.20L35.30-16.30L34.10-6.20L33.60-1.10Q33.60 0.10 33.25 0.70Q32.90 1.30 31.80 1.30L31.80 1.30Q30.20 1.30 29.90 0.10L29.90 0.10Q29.70-0.50 29.50-2.70L29.50-2.70L29.40-4.20Q27-19.60 22.20-59L22.20-59L21.90-59.20L21.80-59.10L21.80-59L16.80-4.40L16.80-2.60Q16.80 1.30 15.10 1.30L15.10 1.30ZM73 0.90Q71.50 0.90 71.10 0.55Q70.70 0.20 70.50-1.30L70.50-1.30Q69.60-8.60 69.40-10.40L69.40-10.40L68.90-14.40Q66.70-14.90 63.90-14.90L63.90-14.90L60.30-15.10Q57.90-15.40 56.80-15.40L56.80-15.40Q56.20-15.40 56.10-14.90L56.10-14.90Q56.10-14.60 56-14.60L56-14.60L55.80-12.60Q55.70-10.80 54.70-5.40L54.70-5.40Q54.20-2.70 53.50-1.20L53.50-1.20Q52.70 0.50 52 0.50L52 0.50Q51.40 0.50 50.70-0.05Q50-0.60 50-1.20L50-1.20L50.10-1.50L50.20-1.80Q52-8.90 53.20-15.90L53.20-15.90L54.40-22.10L55.60-29.70Q55.60-29.70 56.70-36.30L56.70-36.30Q57.20-39 58.50-45L58.50-45Q59.90-51.80 60.20-54.30L60.20-54.30Q60.30-54.60 60.60-58L60.60-58Q61-61.80 61.30-63.60L61.30-63.60Q61.60-66.20 61.90-66.60L61.90-66.60L62.60-66.60Q62.90-66.50 63.30-66.50L63.30-66.50Q64.50-66.50 65.10-67.10L65.10-67.10Q65.80-67.10 66.35-66.65Q66.90-66.20 66.90-65.60L66.90-65.60Q66.90-60.80 67.60-54.60L67.60-54.60Q68-51.40 68.20-49.30L68.20-49.30Q69.30-36.40 73.80-0.90L73.80-0.90L73.80-0.60Q73.80 0.40 73 0.90L73 0.90ZM67.40-17.10L68.40-17.10Q67.40-31.50 64.60-59.60L64.60-59.60L59.20-32.90Q56.90-21.40 56.90-18.40L56.90-18.40Q56.90-17.90 60.70-17.50Q64.50-17.10 67.40-17.10L67.40-17.10ZM91.20 1.50Q90.90 1.50 90.40 1.10Q89.90 0.70 89.80 0.40L89.80 0.40Q90.70-2 90.70-17.10L90.70-17.10Q90.70-20 90.40-25.40L90.40-25.40L89.90-32.50L89.30-33.80L89.60-35Q89-36.40 87.80-39.70Q86.60-43 85.40-46.40L85.40-46.40Q81.80-55.90 80.70-60.10L80.70-60.10Q80.10-62.10 79.80-63.80L79.80-63.80L81.20-64.90Q82.20-64.70 84.10-58.50L84.10-58.50Q85.60-54.10 86.80-49.80L86.80-49.80L88-46Q89.80-39.80 90.60-39.60L90.60-39.60L91-41.40L90.80-41.90Q91.60-42.90 92.80-49L92.80-49Q94.10-56 95.30-60.80L95.30-60.80Q96.60-66.40 97.90-66.40L97.90-66.40Q98.40-66.40 98.80-66.10Q99.20-65.80 99.20-65.40L99.20-65.40Q99.20-63.90 96.20-53.60L96.20-53.60Q94.70-48.70 93.70-44.40L93.70-44.40Q92.50-39.30 92.50-35.30L92.50-35.30Q93-34.30 93-33.60L93-33.60Q93-33.10 92.70-32.20L92.70-32.20Q92.40-31.30 92.40-30.70L92.40-30.70Q92.40-30.20 92.80-26.20L92.80-26.20Q93.20-23.50 93.20-21.60L93.20-21.60Q93.20-17.20 93.30-13.70L93.30-13.70L93.30-5.70L93.30-5.30Q93.30 1.50 91.20 1.50L91.20 1.50ZM124.90 1.60Q117.40 1.60 113.80-9.20L113.80-9.20Q110.20-20 110.20-42.80L110.20-42.80Q110.20-47.70 110.40-51.50L110.40-51.50Q110.60-56.10 111.80-61.40L111.80-61.40Q112.30-64.10 113.05-66.10Q113.80-68.10 115.10-70.30L115.10-70.30Q117.40-74.30 121.50-75.90L121.50-75.90Q123.70-76.70 126.10-76.70L126.10-76.70Q129.10-76.70 129.10-75L129.10-75Q129.10-73.80 127.60-73.80L127.60-73.80Q127.20-73.80 126.20-74.10L126.20-74.10L124.80-74.30Q121.50-74.30 119.10-71.60L119.10-71.60Q117.40-69.60 115.80-64.70L115.80-64.70Q114.70-60.70 114.30-55.80L114.30-55.80Q114.00-53.10 113.70-47L113.70-47L113.60-40.40L113.60-34.90Q113.60-25.20 115.00-17.20L115.00-17.20Q116.00-12.20 117.35-8.90Q118.70-5.60 121.00-3.50L121.00-3.50Q123.50-1.20 126.40-1.20L126.40-1.20Q131.70-1.20 134.90-6.20L134.90-6.20Q134.90-8.90 134.50-13.30L134.50-13.30Q134.20-15.50 133.70-17.40L133.70-17.40Q133.10-19.10 132.30-19.10L132.30-19.10L130.40-18.90L128.30-18.70Q126.00-18.70 126.00-20.40L126.00-20.40Q126.00-21.20 128.80-21.90Q131.60-22.60 133.50-22.60L133.50-22.60Q135.10-22.60 135.85-21.45Q136.60-20.30 136.60-18.40L136.60-18.40Q136.60-16.20 137.60-9.50L137.60-9.50Q138.60-3.90 138.60-0.60L138.60-0.60Q138.60 1 137.30 1L137.30 1Q134.90 1 134.90-1.20L134.90-1.20L135-1.50L135-1.70Q129.30 1.60 124.90 1.60L124.90 1.60ZM166.40 1.70L165 1.20Q163.80-0.10 162.40-5.70Q161-11.30 159.80-18.30L159.80-18.30Q159-24 157.50-29.60L157.50-29.60Q156.30-34.60 155.20-34.60L155.20-34.60L154.90-34.60Q152.70-34.60 152.70-33.20L152.70-33.20Q152.70-26 153.50-11.30L153.50-11.30Q153.90-2.30 154.40-0.80L154.40-0.80L153.60 0.90L152.20 0.90L151.40 0.10Q149.80-46.10 149.80-62.90L149.80-62.90Q149.80-64 149.95-64.70Q150.10-65.40 150.60-66L150.60-66Q151-66.70 152-66.70L152-66.70Q157.10-66.70 160.20-64.20Q163.30-61.70 163.30-57L163.30-57L163.30-49.70Q163.30-47.80 162.05-44.60Q160.80-41.40 159.30-38.70L159.30-38.70L158-36.20Q159.10-31.10 162.35-17.85Q165.60-4.60 165.90-3.80L165.90-3.80Q166-3.70 166.15-3.30Q166.30-2.90 166.80-2.10L166.80-2.10Q167.50-0.70 167.50 0.30L167.50 0.30Q167.50 1.70 166.40 1.70L166.40 1.70ZM153.20-37.10Q155.10-37.10 156.60-39Q158.10-40.90 159-43.90L159-43.90Q160.60-50 160.60-53.60L160.60-53.60Q160.60-55.90 160.35-57.40Q160.10-58.90 159.50-60.60L159.50-60.60Q158.30-64.10 153.80-64.10L153.80-64.10Q153.30-64.10 153-63.25Q152.70-62.40 152.70-61.50L152.70-61.50Q152.70-54.80 152.90-49.40L152.90-49.40Q153-44 153-37.30L153-37.30L153.20-37.10ZM198.40 0.90Q196.90 0.90 196.50 0.55Q196.10 0.20 195.90-1.30L195.90-1.30Q195-8.60 194.80-10.40L194.80-10.40L194.30-14.40Q192.10-14.90 189.30-14.90L189.30-14.90L185.70-15.10Q183.30-15.40 182.20-15.40L182.20-15.40Q181.60-15.40 181.50-14.90L181.50-14.90Q181.50-14.60 181.40-14.60L181.40-14.60L181.20-12.60Q181.10-10.80 180.10-5.40L180.10-5.40Q179.60-2.70 178.90-1.20L178.90-1.20Q178.10 0.50 177.40 0.50L177.40 0.50Q176.80 0.50 176.10-0.05Q175.40-0.60 175.40-1.20L175.40-1.20L175.50-1.50L175.60-1.80Q177.40-8.90 178.60-15.90L178.60-15.90L179.80-22.10L181-29.70Q181-29.70 182.10-36.30L182.10-36.30Q182.60-39 183.90-45L183.90-45Q185.30-51.80 185.60-54.30L185.60-54.30Q185.70-54.60 186-58L186-58Q186.40-61.80 186.70-63.60L186.70-63.60Q187-66.20 187.30-66.60L187.30-66.60L188-66.60Q188.30-66.50 188.70-66.50L188.70-66.50Q189.90-66.50 190.50-67.10L190.50-67.10Q191.20-67.10 191.75-66.65Q192.30-66.20 192.30-65.60L192.30-65.60Q192.30-60.80 193-54.60L193-54.60Q193.40-51.40 193.60-49.30L193.60-49.30Q194.70-36.40 199.20-0.90L199.20-0.90L199.20-0.60Q199.20 0.40 198.40 0.90L198.40 0.90ZM192.80-17.10L193.80-17.10Q192.80-31.50 190-59.60L190-59.60L184.60-32.90Q182.30-21.40 182.30-18.40L182.30-18.40Q182.30-17.90 186.10-17.50Q189.90-17.10 192.80-17.10L192.80-17.10ZM249.50 5.20Q247.50 5.20 247.50-1.20L247.50-1.20L247.50-7.80Q247.50-22.20 246.90-30.30L246.90-30.30L246.60-34Q246.20-36.50 246.20-38.40L246.20-38.40Q246.20-41.80 246.40-44.60L246.40-44.60L246.60-50.80Q246.60-53.90 246.20-55.50L246.20-55.50Q244.20-54.10 234.10-13.40L234.10-13.40L234-11.90Q233.70-9.40 233.20-7.90L233.20-7.90Q232.90-6.80 232.35-6.20Q231.80-5.60 231.10-5.60L231.10-5.60Q229.50-5.60 228.80-6.40Q228.10-7.20 228.10-8.90L228.10-8.90Q228.10-11.60 225.55-22.90Q223-34.20 220.05-44.60Q217.10-55 216-56.10L216-56.10Q215.90-52.60 215.20-39.60L215.20-39.60Q213.80-16.60 213.80-3.40L213.80-3.40L213.90 0.60Q213.50 1.90 211.80 1.90L211.80 1.90Q211.50 1.90 210.80 1.35Q210.10 0.80 210.10 0.50L210.10 0.50Q210.10-8.50 211.70-31.10L211.70-31.10Q213.20-52.10 213.20-62.60L213.20-62.60Q213.20-63.10 213-63.60L213-63.60Q212.70-64.20 212.70-64.50L212.70-64.50Q212.70-66 215.30-66L215.30-66Q217-66 217.30-64.50L217.30-64.50Q217.70-62.50 217.70-61.50L217.70-61.50L217.80-60.30Q218.30-57.70 220.70-52.30L220.70-52.30Q222.60-48 223.60-44.80L223.60-44.80Q224.20-42.40 224.70-40.90L224.70-40.90Q226.30-35.10 226.80-32.30L226.80-32.30L228.10-29.70Q228.40-28.20 229.30-24.80L229.30-24.80Q230.20-21 230.60-18.60Q231-16.20 231-14L231-14Q232.10-15.70 237.25-34.45Q242.40-53.20 243.30-58.40L243.30-58.40Q243.40-58.60 243.45-58.95Q243.50-59.30 243.60-59.90L243.60-59.90Q243.80-61.20 244.50-63.80L244.50-63.80Q245.30-65.80 246.90-65.80L246.90-65.80Q247.60-65.80 248.50-65.20Q249.40-64.60 249.40-64L249.40-64Q249.40-22.30 250.70-19.90L250.70-19.90L250.70-14.70Q250.60-12.40 250.60-9.40L250.60-9.40Q250.60-3 251.30 0.20L251.30 0.20Q251.40 0.30 251.45 0.50Q251.50 0.70 251.60 1L251.60 1Q251.70 1.40 251.70 1.90L251.70 1.90Q251.70 3 251.05 4.10Q250.40 5.20 249.50 5.20L249.50 5.20ZM246.20-55.90L246.20-56.10L246.10-56.10L245.90-56L246.20-55.90Z"
              fill="#000000"
              fontsize="100"
              transform="matrix(1,0,0,1,138.95,292.75)"
            ></path>
          </svg>
      </div>
      <div className="form-two">
        <div className="form-panel two">
          <div className="form-header">
            <h1>Регистрация</h1>
          </div>
          <div className="form-content">
        
              <div className="form-group">
                <label for="username">Имя</label>
                <input
                  id="username"
                  type="text"
                  name="username"
                  required="required"
                  value={firstname}
                  onChange={(e) => setFirstname(e.target.value)}
                />
              
              </div>
              <div className="form-group">
                <label for="password">фамилия</label>
                <input
                  id="password"
                  type="text"
                  name="password"
                  required="required"
                  value={lastname}
                  onChange={(e) => setLastname(e.target.value)}
                />
              </div>
              <div className="form-group">
                <label for="cpassword">логин</label>
                <input
                  id="cpassword"
                  type="text"
                  name="cpassword"
                  required="required"
                  value={login}
                  onChange={(e) => setLogin(e.target.value)}
                />
              </div>
              <div className="form-group">
                <label for="email">Email Address</label>
                <input
                  id="email"
                  type="email"
                  name="email"
                  required="required"
                  value={email}
                  onChange={(e) => handleValidEmail(e)}
                />
                <span className="validLog">{validEmail}</span>
              </div>
              <div className="form-group">
                <label for="email">пароль</label>
                <input
                  id="email"
                  type="password"
                  name="email"
                  required="required"
                  value={password}
                  onChange={(e) => handleValidPassword(e)}
                />
                <span className="validLog">{validPassword}</span>
              </div>
              <div className="form-group">
                <label for="email">подтвердите пароль</label>
                <input
                  id="email"
                  type="password"
                  name="email"
                  required="required"
                  value={passwordTwo}
                  onChange={(e) => setPasswordTwo(e.target.value)}
                />
                <span className="validLog">{message}</span>
              </div>
              
              <div className="form-group">
                <button type="submit" onClick={handleSignUp}>
                  Регистрация
                </button>
                <Link to='/signin' type="submit">
                  есть аккаунт
                </Link>
              </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default SignUp;
